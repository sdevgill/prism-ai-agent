{% extends "base.html" %}

{% block title %}Profile · Prism AI Agent{% endblock %}

{% block content %}
    <section class="space-y-8">
        <header class="space-y-2">
            <h1 class="text-3xl font-semibold text-slate-900">Account settings</h1>
            <p class="text-sm text-slate-600">Keep your email and password up to date so Prism can secure your projects.</p>
        </header>

        {% if request.user.is_authenticated %}
            <form method="post" action="{% url 'accounts:profile' %}" class="space-y-6 rounded-xl border border-slate-200 bg-white p-6 shadow-sm" hx-post="{% url 'accounts:profile' %}" hx-target="this" hx-swap="outerHTML">
                {% csrf_token %}
                <div class="space-y-5">
                    {% include 'partials/components/form_field.html' with field_id='email' label='Email' required=True control_template='accounts/partials/email_control.html' description='Used for sign-in and status notifications.' %}
                    {% include 'partials/components/form_field.html' with field_id='password' label='Password' required=True control_template='accounts/partials/password_control.html' description='Set a strong password to protect your assets.' %}
                </div>
                <div class="flex gap-3">
                    {% include 'partials/components/button.html' with label='Save changes' type='submit' %}
                    {% include 'partials/components/button.html' with label='Reset' type='reset' variant='ghost' %}
                </div>
            </form>
        {% else %}
            <div class="grid gap-6 lg:grid-cols-2">
                <section class="space-y-4 rounded-xl border border-slate-200 bg-white p-6 shadow-sm">
                    <h2 class="text-base font-semibold text-slate-800">Sign in</h2>
                    <p class="text-sm text-slate-600">Access your generated assets and continue creating new ones.</p>
                    <form method="post" action="{% url 'accounts:profile' %}" class="space-y-4">
                        {% csrf_token %}
                        {% include 'partials/components/form_field.html' with field_id='login_email' label='Email' required=True control_template='accounts/partials/email_control.html' %}
                        {% include 'partials/components/form_field.html' with field_id='login_password' label='Password' required=True control_template='accounts/partials/password_control.html' %}
                        {% include 'partials/components/button.html' with label='Sign in' type='submit' %}
                    </form>
                </section>
                <section class="space-y-4 rounded-xl border border-slate-200 bg-white p-6 shadow-sm">
                    <h2 class="text-base font-semibold text-slate-800">Create an account</h2>
                    <p class="text-sm text-slate-600">Set your email and password now—Prism handles the rest.</p>
                    <form method="post" action="{% url 'accounts:profile' %}" class="space-y-4">
                        {% csrf_token %}
                        {% include 'partials/components/form_field.html' with field_id='register_email' label='Email' required=True control_template='accounts/partials/email_control.html' %}
                        {% include 'partials/components/form_field.html' with field_id='register_password' label='Password' required=True control_template='accounts/partials/password_control.html' %}
                        {% include 'partials/components/button.html' with label='Create account' type='submit' %}
                    </form>
                </section>
            </div>
        {% endif %}
    </section>
{% endblock %}
